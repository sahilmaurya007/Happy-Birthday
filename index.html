<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Birthday Paradise for Upasna | Future Doctor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@700&family=Caveat:wght@700&family=Bebas+Neue&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ffebf0, #ffd6e0);
            color: #fff;
            overflow: hidden;
            min-height: 100vh;
            position: relative;
        }
        
        /* Animated background particles */
        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }
        
        #scene-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .overlay-content {
            position: relative;
            z-index: 2;
            pointer-events: none;
        }
        
        .overlay-content > * {
            pointer-events: auto;
        }
        
        /* Floating UI Elements */
        .floating-ui {
            position: fixed;
            z-index: 3;
            transition: all 0.5s ease;
        }
        
        .main-title {
            top: 5%;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            width: 90%;
            max-width: 900px;
        }
        
        .birthday-title {
            font-family: 'Dancing Script', cursive;
            font-size: 5.5rem;
            color: #ff4d8d;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(255, 77, 141, 0.7), 0 0 40px rgba(255, 77, 141, 0.5);
            animation: titleGlow 3s infinite alternate;
            background: linear-gradient(45deg, #ff4d8d, #ff9a3d, #ffd166, #06d6a0, #118ab2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 300% 300%;
            animation: gradientShift 5s ease infinite, float 4s ease-in-out infinite;
        }
        
        .subtitle {
            font-family: 'Bebas Neue', cursive;
            font-size: 2.8rem;
            color: #06d6a0;
            margin-bottom: 5px;
            letter-spacing: 3px;
            animation: pulse 2s infinite;
        }
        
        .doctor-icon {
            font-size: 3.5rem;
            color: #118ab2;
            margin: 0 15px;
            animation: rotate 10s infinite linear, pulse 1.5s infinite;
            display: inline-block;
        }
        
        /* Control Panel */
        .control-panel {
            position: fixed;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 77, 141, 0.5);
            border-radius: 25px;
            padding: 25px 40px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
            box-shadow: 0 10px 40px rgba(255, 77, 141, 0.3);
            z-index: 10;
        }
        
        .control-btn {
            background: linear-gradient(45deg, #ff4d8d, #ff9a3d);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(255, 77, 141, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .control-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: 0.5s;
        }
        
        .control-btn:hover::before {
            left: 100%;
        }
        
        .control-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 25px rgba(255, 77, 141, 0.6);
        }
        
        .control-btn:active {
            transform: translateY(0) scale(0.98);
        }
        
        .quote-btn {
            background: linear-gradient(45deg, #118ab2, #06d6a0);
        }
        
        .love-btn {
            background: linear-gradient(45deg, #ff4d8d, #ef476f);
        }
        
        .joy-btn {
            background: linear-gradient(45deg, #ffd166, #ff9a3d);
        }
        
        .music-btn {
            background: linear-gradient(45deg, #8338ec, #3a86ff);
        }
        
        /* Quote Display */
        .quote-display {
            position: fixed;
            top: 20%;
            right: 5%;
            width: 350px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            border-left: 8px solid #ff4d8d;
            transform: translateX(400px);
            transition: transform 0.8s ease;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            color: #333;
        }
        
        .quote-display.active {
            transform: translateX(0);
        }
        
        .quote-text {
            font-style: italic;
            font-size: 1.3rem;
            line-height: 1.6;
            color: #333;
            margin-bottom: 20px;
        }
        
        .quote-author {
            text-align: right;
            color: #06d6a0;
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        .close-quote {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 77, 141, 0.2);
            border: none;
            color: #ff4d8d;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        /* Celebration Overlay */
        .celebration-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 4;
        }
        
        .confetti {
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: #ff4d8d;
            border-radius: 50%;
            animation: fall 5s linear infinite;
        }
        
        .heart {
            position: absolute;
            font-size: 30px;
            color: #ef476f;
            animation: floatUp 8s linear infinite;
        }
        
        .sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #ffd166;
            border-radius: 50%;
            animation: sparkleAnim 2s infinite alternate;
        }
        
        /* Cake Cutting Message */
        .cake-message {
            position: fixed;
            bottom: 25%;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            width: 90%;
            max-width: 600px;
            opacity: 0;
            transition: all 0.8s ease;
            border: 3px solid #ffd166;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
            color: #333;
        }
        
        .cake-message.active {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
        
        .cake-title {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            color: #ffd166;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 209, 102, 0.5);
        }
        
        /* Doctor Message */
        .doctor-message {
            position: fixed;
            top: 20%;
            left: 5%;
            width: 350px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            border-left: 8px solid #118ab2;
            transform: translateX(-400px);
            transition: transform 0.8s ease;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            color: #333;
        }
        
        .doctor-message.active {
            transform: translateX(0);
        }
        
        /* Birthday Count - CENTERED */
        .birthday-count {
            position: fixed;
            top: 15%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px 30px;
            text-align: center;
            border: 2px solid #ff4d8d;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            color: #333;
            z-index: 10;
        }
        
        .count-number {
            font-family: 'Bebas Neue', cursive;
            font-size: 3.5rem;
            color: #ff4d8d;
            line-height: 1;
        }
        
        .count-text {
            font-size: 1.1rem;
            color: #06d6a0;
            margin-top: 5px;
        }
        
        /* Music Controls - DARKER ICON */
        .music-controls {
            position: fixed;
            top: 5%;
            left: 5%;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50px;
            padding: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
        
        .music-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #333 !important; /* Darker icon */
            font-weight: bold;
        }
        
        /* Welcome Message */
        .welcome-message {
            position: fixed;
            top: 30%;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            width: 90%;
            max-width: 600px;
            opacity: 0;
            transition: all 0.8s ease;
            border: 3px solid #ff4d8d;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }
        
        .welcome-message.active {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
        
        .welcome-title {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            color: #ff4d8d;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 77, 141, 0.5);
        }
        
        /* Animations */
        @keyframes titleGlow {
            0% { text-shadow: 0 0 20px rgba(255, 77, 141, 0.7), 0 0 40px rgba(255, 77, 141, 0.5); }
            100% { text-shadow: 0 0 30px rgba(6, 214, 160, 0.7), 0 0 60px rgba(6, 214, 160, 0.5); }
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes float {
            0%, 100% { transform: translate(-50%, 0) rotate(0deg); }
            50% { transform: translate(-50%, -20px) rotate(5deg); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        @keyframes floatUp {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
        
        @keyframes sparkleAnim {
            0% { transform: scale(1); opacity: 0.5; }
            100% { transform: scale(1.5); opacity: 1; }
        }
        
        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffebf0, #ffd6e0);
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease;
        }
        
        .loading-text {
            font-family: 'Bebas Neue', cursive;
            font-size: 3rem;
            color: #ff4d8d;
            margin-bottom: 30px;
            letter-spacing: 5px;
            text-shadow: 0 0 10px rgba(255, 77, 141, 0.5);
        }
        
        .loading-bar {
            width: 300px;
            height: 10px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .loading-progress {
            height: 100%;
            background: linear-gradient(90deg, #ff4d8d, #06d6a0);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .quote-display, .doctor-message {
                width: 300px;
            }
            
            .birthday-title {
                font-size: 4rem;
            }
            
            .subtitle {
                font-size: 2rem;
            }
            
            .birthday-count {
                top: 12%;
            }
            
            .welcome-message {
                top: 25%;
            }
        }
        
        @media (max-width: 768px) {
            .control-panel {
                width: 90%;
                padding: 20px;
                flex-direction: column;
                align-items: center;
            }
            
            .control-btn {
                padding: 12px 20px;
                font-size: 1rem;
                width: 100%;
                max-width: 300px;
            }
            
            .quote-display, .doctor-message {
                width: 90%;
                right: 5%;
                left: 5%;
                transform: translateY(100vh);
            }
            
            .quote-display.active, .doctor-message.active {
                transform: translateY(0);
            }
            
            .birthday-count {
                top: 10%;
                padding: 15px 25px;
            }
            
            .count-number {
                font-size: 2.8rem;
            }
            
            .welcome-message {
                top: 20%;
                padding: 20px;
            }
            
            .welcome-title {
                font-size: 2.8rem;
            }
            
            .music-controls {
                top: auto;
                bottom: 15%;
                left: 50%;
                transform: translateX(-50%);
            }
        }
        
        /* Floating hearts around the page */
        .floating-heart {
            position: absolute;
            font-size: 20px;
            color: #ff4d8d;
            opacity: 0.7;
            animation: floatHeart 15s infinite linear;
            z-index: 1;
        }
        
        @keyframes floatHeart {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Bouquet container */
        .bouquet-container {
            position: fixed;
            bottom: 20%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 5;
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .rose {
            width: 60px;
            height: 80px;
            position: relative;
            transform-origin: bottom center;
            animation: roseFloat 8s infinite ease-in-out;
        }
        
        .rose:nth-child(1) { animation-delay: 0s; }
        .rose:nth-child(2) { animation-delay: 1s; }
        .rose:nth-child(3) { animation-delay: 2s; }
        .rose:nth-child(4) { animation-delay: 3s; }
        .rose:nth-child(5) { animation-delay: 4s; }
        .rose:nth-child(6) { animation-delay: 5s; }
        
        .rose-stem {
            position: absolute;
            width: 8px;
            height: 60px;
            background: linear-gradient(to bottom, #4CAF50, #2E7D32);
            border-radius: 4px;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .rose-bloom {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
        }
        
        @keyframes roseFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }
    </style>
</head>
<body>
    <!-- Background particles -->
    <div id="particles-js"></div>
    
    <!-- Scene container -->
    <div id="scene-container"></div>
    
    <!-- Loading Screen -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-text">CREATING BIRTHDAY MAGIC</div>
        <div class="loading-bar">
            <div class="loading-progress" id="loading-progress"></div>
        </div>
        <div style="margin-top: 20px; color: #06d6a0; font-weight: bold;">Loading 3D Celebration...</div>
    </div>
    
    <!-- Bouquet of Roses -->
    <div class="bouquet-container">
        <div class="rose">
            <div class="rose-stem"></div>
            <div class="rose-bloom" style="background: linear-gradient(135deg, #ff4d8d, #ff9a3d);"></div>
        </div>
        <div class="rose">
            <div class="rose-stem"></div>
            <div class="rose-bloom" style="background: linear-gradient(135deg, #06d6a0, #118ab2);"></div>
        </div>
        <div class="rose">
            <div class="rose-stem"></div>
            <div class="rose-bloom" style="background: linear-gradient(135deg, #ffd166, #ff9a3d);"></div>
        </div>
        <div class="rose">
            <div class="rose-stem"></div>
            <div class="rose-bloom" style="background: linear-gradient(135deg, #8338ec, #3a86ff);"></div>
        </div>
        <div class="rose">
            <div class="rose-stem"></div>
            <div class="rose-bloom" style="background: linear-gradient(135deg, #ef476f, #ff4d8d);"></div>
        </div>
        <div class="rose">
            <div class="rose-stem"></div>
            <div class="rose-bloom" style="background: linear-gradient(135deg, #06d6a0, #ffd166);"></div>
        </div>
    </div>
    
    <!-- Overlay Content -->
    <div class="overlay-content">
        <div class="floating-ui main-title">
            <h1 class="birthday-title">Happy Birthday Upasna!</h1>
            <h2 class="subtitle">FUTURE DOCTOR <i class="fas fa-stethoscope doctor-icon"></i></h2>
            <p style="color: #ff4d8d; font-size: 1.3rem; text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);">
                May your day be filled with love, laughter, and joy beyond measure!
            </p>
        </div>
        
        <!-- Birthday Count - CENTERED -->
        <div class="floating-ui birthday-count">
            <div class="count-number" id="birthday-count">22</div>
            <div class="count-text">JANUARY</div>
            <div style="color: #333; font-size: 1rem; margin-top: 10px;">YOUR SPECIAL DAY</div>
        </div>
        
        <!-- Welcome Message -->
        <div class="welcome-message" id="welcome-message">
            <h2 class="welcome-title">Welcome to Your Special Day!</h2>
            <p style="color: #333; font-size: 1.3rem; line-height: 1.6;">
                This celebration is crafted just for you, Upasna! 
                May your birthday be as beautiful as these roses and as bright as your future in medicine.
            </p>
            <div style="margin-top: 20px; color: #ff4d8d; font-weight: bold;">
                With love, Sahil
            </div>
        </div>
        
        <!-- Music Controls - DARKER ICON -->
        <div class="music-controls">
            <button class="music-btn" id="music-toggle">
                <i class="fas fa-music" style="color: #333;"></i>
            </button>
            <span id="music-status">Music: ON</span>
        </div>
        
        <!-- Quote Display -->
        <div class="quote-display" id="quote-display">
            <button class="close-quote" id="close-quote">×</button>
            <div class="quote-text" id="quote-text">
                "Love is the greatest gift we can give and receive. On your birthday, I give you all my love."
            </div>
            <div class="quote-author" id="quote-author">- Sahil</div>
        </div>
        
        <!-- Doctor Message -->
        <div class="doctor-message" id="doctor-message">
            <h3 style="color: #118ab2; font-size: 1.8rem; margin-bottom: 15px;">
                <i class="fas fa-heartbeat"></i> Future Doctor
            </h3>
            <p style="color: #333; line-height: 1.6; margin-bottom: 20px;">
                Your journey to becoming a doctor inspires everyone around you. 
                Your compassion and dedication will heal countless lives. 
                The world needs more doctors like you!
            </p>
            <div style="color: #06d6a0; font-weight: 700; font-size: 1.1rem;">
                Keep shining, future healer!
            </div>
        </div>
        
        <!-- Cake Cutting Message -->
        <div class="cake-message" id="cake-message">
            <h2 class="cake-title">Let's Cut the Cake!</h2>
            <p style="color: #333; font-size: 1.3rem; line-height: 1.6; margin-bottom: 25px;">
                Make a wish and click the cake to cut it! Every slice is filled with love, happiness, and sweet moments for your special day.
            </p>
            <button class="control-btn" id="close-cake-msg">
                <i class="fas fa-birthday-cake"></i> Let's Celebrate!
            </button>
        </div>
        
        <!-- Control Panel -->
        <div class="floating-ui control-panel">
            <button class="control-btn" id="cake-btn">
                <i class="fas fa-birthday-cake"></i> Cut Cake
            </button>
            <button class="control-btn love-btn" id="love-btn">
                <i class="fas fa-heart"></i> Show Love
            </button>
            <button class="control-btn joy-btn" id="joy-btn">
                <i class="fas fa-laugh-beam"></i> Spread Joy
            </button>
            <button class="control-btn quote-btn" id="quote-btn">
                <i class="fas fa-quote-right"></i> Read Quote
            </button>
            <button class="control-btn" id="doctor-btn">
                <i class="fas fa-stethoscope"></i> Doctor Message
            </button>
        </div>
    </div>
    
    <!-- Celebration Overlay -->
    <div class="celebration-overlay" id="celebration-overlay"></div>

    <script>
        // Initialize particles.js
        document.addEventListener('DOMContentLoaded', function() {
            // Create floating hearts
            createFloatingHearts();
            
            // Initialize Three.js scene
            initThreeJS();
            
            // Show welcome message after loading
            setTimeout(() => {
                document.getElementById('welcome-message').classList.add('active');
            }, 1500);
        });
        
        function createFloatingHearts() {
            const container = document.body;
            const heartCount = 20;
            
            for (let i = 0; i < heartCount; i++) {
                const heart = document.createElement('div');
                heart.classList.add('floating-heart');
                heart.innerHTML = '❤️';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = (Math.random() * 10 + 10) + 's';
                heart.style.animationDelay = Math.random() * 5 + 's';
                heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
                container.appendChild(heart);
            }
        }
        
        // Three.js 3D Scene
        let scene, camera, renderer, controls;
        let birthdayCake, birthdayGirl, doctorModel;
        let cakeCut = false;
        let currentQuote = 0;
        let audioElement;
        let isMusicPlaying = true;
        
        // Quotes database - all signed by Sahil
        const quotes = [
            {
                text: "Love is not about how many days, months, or years you have been together. Love is about how much you love each other every single day.",
                author: "Sahil"
            },
            {
                text: "The best thing to hold onto in life is each other.",
                author: "Sahil"
            },
            {
                text: "A successful marriage requires falling in love many times, always with the same person.",
                author: "Sahil"
            },
            {
                text: "Love is when the other person's happiness is more important than your own.",
                author: "Sahil"
            },
            {
                text: "You are the source of my joy, the center of my world, and the whole of my heart.",
                author: "Sahil"
            },
            {
                text: "The best and most beautiful things in the world cannot be seen or even touched - they must be felt with the heart.",
                author: "Sahil"
            }
        ];
        
        // Initialize 3D scene
        function initThreeJS() {
            // Create scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xffebf0);
            scene.fog = new THREE.Fog(0xffebf0, 1, 1000);
            
            // Create camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 5, 15);
            
            // Create renderer
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.getElementById('scene-container').appendChild(renderer.domElement);
            
            // Add orbit controls
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.minDistance = 5;
            controls.maxDistance = 50;
            controls.maxPolarAngle = Math.PI / 2;
            
            // Add lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xff4d8d, 1);
            directionalLight.position.set(10, 20, 5);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
            
            const pointLight = new THREE.PointLight(0x06d6a0, 1, 100);
            pointLight.position.set(-10, 10, 10);
            scene.add(pointLight);
            
            // Add stars background
            createStars();
            
            // Create birthday elements
            createBirthdayCake();
            createBirthdayGirl();
            createDoctorModel();
            createRoom();
            
            // Start loading progress
            simulateLoading();
            
            // Handle window resize
            window.addEventListener('resize', onWindowResize);
            
            // Initialize music
            initMusic();
        }
        
        function initMusic() {
            // Create audio element
            audioElement = new Audio('https://assets.mixkit.co/music/preview/mixkit-happy-birthday-to-you-511.mp3');
            audioElement.loop = true;
            audioElement.volume = 0.3;
            audioElement.play().catch(e => console.log("Autoplay prevented:", e));
            
            // Toggle music button
            document.getElementById('music-toggle').addEventListener('click', toggleMusic);
        }
        
        function toggleMusic() {
            if (isMusicPlaying) {
                audioElement.pause();
                document.getElementById('music-status').textContent = 'Music: OFF';
                isMusicPlaying = false;
            } else {
                audioElement.play();
                document.getElementById('music-status').textContent = 'Music: ON';
                isMusicPlaying = true;
            }
        }
        
        function simulateLoading() {
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 10;
                if (progress > 100) progress = 100;
                document.getElementById('loading-progress').style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    setTimeout(() => {
                        document.getElementById('loading-screen').style.opacity = '0';
                        setTimeout(() => {
                            document.getElementById('loading-screen').style.display = 'none';
                        }, 1000);
                        
                        // Show initial messages
                        setTimeout(() => {
                            showCakeMessage();
                        }, 500);
                        
                        setTimeout(() => {
                            showDoctorMessage();
                        }, 3000);
                    }, 500);
                }
            }, 100);
        }
        
        function createStars() {
            const starGeometry = new THREE.BufferGeometry();
            const starCount = 5000;
            const positions = new Float32Array(starCount * 3);
            
            for (let i = 0; i < starCount * 3; i += 3) {
                positions[i] = (Math.random() - 0.5) * 2000;
                positions[i + 1] = (Math.random() - 0.5) * 2000;
                positions[i + 2] = (Math.random() - 0.5) * 2000;
            }
            
            starGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            
            const starMaterial = new THREE.PointsMaterial({
                color: 0xff4d8d,
                size: 2,
                transparent: true
            });
            
            const stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);
        }
        
        function createBirthdayCake() {
            // Cake base
            const cakeGeometry = new THREE.CylinderGeometry(3, 3, 1, 32);
            const cakeMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xff4d8d,
                shininess: 100
            });
            const cakeBase = new THREE.Mesh(cakeGeometry, cakeMaterial);
            cakeBase.position.y = 0.5;
            cakeBase.castShadow = true;
            cakeBase.receiveShadow = true;
            scene.add(cakeBase);
            
            // Cake middle layer
            const middleGeometry = new THREE.CylinderGeometry(2.5, 2.5, 1, 32);
            const middleMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xff9a3d,
                shininess: 100
            });
            const cakeMiddle = new THREE.Mesh(middleGeometry, middleMaterial);
            cakeMiddle.position.y = 1.5;
            cakeMiddle.castShadow = true;
            cakeMiddle.receiveShadow = true;
            scene.add(cakeMiddle);
            
            // Cake top layer
            const topGeometry = new THREE.CylinderGeometry(2, 2, 1, 32);
            const topMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xffd166,
                shininess: 100
            });
            const cakeTop = new THREE.Mesh(topGeometry, topMaterial);
            cakeTop.position.y = 2.5;
            cakeTop.castShadow = true;
            cakeTop.receiveShadow = true;
            scene.add(cakeTop);
            
            // Candles
            const candleGeometry = new THREE.CylinderGeometry(0.1, 0.1, 2, 16);
            const candleMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xef476f,
                shininess: 50
            });
            
            for (let i = 0; i < 8; i++) {
                const candle = new THREE.Mesh(candleGeometry, candleMaterial);
                const angle = (i / 8) * Math.PI * 2;
                const radius = 1.5;
                candle.position.x = Math.cos(angle) * radius;
                candle.position.z = Math.sin(angle) * radius;
                candle.position.y = 3.5;
                candle.castShadow = true;
                scene.add(candle);
                
                // Flame
                const flameGeometry = new THREE.ConeGeometry(0.15, 0.5, 16);
                const flameMaterial = new THREE.MeshPhongMaterial({ 
                    color: 0xff9a00,
                    emissive: 0xff6600,
                    transparent: true,
                    opacity: 0.8
                });
                const flame = new THREE.Mesh(flameGeometry, flameMaterial);
                flame.position.y = 4.3;
                flame.position.x = Math.cos(angle) * radius;
                flame.position.z = Math.sin(angle) * radius;
                scene.add(flame);
                
                // Animate flames
                animateFlame(flame);
            }
            
            // Group cake parts
            birthdayCake = new THREE.Group();
            birthdayCake.add(cakeBase, cakeMiddle, cakeTop);
            birthdayCake.userData = { isCake: true };
            scene.add(birthdayCake);
            
            // Add cake plate
            const plateGeometry = new THREE.CylinderGeometry(4, 4, 0.2, 32);
            const plateMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xffffff,
                shininess: 50
            });
            const plate = new THREE.Mesh(plateGeometry, plateMaterial);
            plate.position.y = 0;
            plate.receiveShadow = true;
            scene.add(plate);
        }
        
        function animateFlame(flame) {
            const originalY = flame.position.y;
            let time = 0;
            
            function animate() {
                time += 0.1;
                flame.position.y = originalY + Math.sin(time) * 0.1;
                flame.scale.x = flame.scale.y = flame.scale.z = 1 + Math.sin(time * 2) * 0.1;
                
                if (flame.parent) {
                    requestAnimationFrame(animate);
                }
            }
            
            animate();
        }
        
        function createBirthdayGirl() {
            // Create a simple girl figure
            const group = new THREE.Group();
            
            // Body
            const bodyGeometry = new THREE.CylinderGeometry(0.5, 0.7, 2, 16);
            const bodyMaterial = new THREE.MeshPhongMaterial({ color: 0xff4d8d });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            body.position.y = 1;
            body.castShadow = true;
            group.add(body);
            
            // Head
            const headGeometry = new THREE.SphereGeometry(0.6, 32, 32);
            const headMaterial = new THREE.MeshPhongMaterial({ color: 0xffd1dc });
            const head = new THREE.Mesh(headGeometry, headMaterial);
            head.position.y = 2.5;
            head.castShadow = true;
            group.add(head);
            
            // Dress
            const dressGeometry = new THREE.ConeGeometry(0.8, 1.5, 16);
            const dressMaterial = new THREE.MeshPhongMaterial({ color: 0x8338ec });
            const dress = new THREE.Mesh(dressGeometry, dressMaterial);
            dress.position.y = 0.2;
            dress.rotation.x = Math.PI;
            dress.castShadow = true;
            group.add(dress);
            
            // Position the girl
            group.position.set(-8, 0, 0);
            group.scale.set(1.2, 1.2, 1.2);
            birthdayGirl = group;
            scene.add(birthdayGirl);
            
            // Animate the girl
            animateGirl();
        }
        
        function animateGirl() {
            let time = 0;
            
            function animate() {
                time += 0.02;
                if (birthdayGirl) {
                    birthdayGirl.position.y = Math.sin(time) * 0.2;
                    birthdayGirl.rotation.y = time * 0.5;
                }
                requestAnimationFrame(animate);
            }
            
            animate();
        }
        
        function createDoctorModel() {
            // Create a simple doctor figure
            const group = new THREE.Group();
            
            // Body
            const bodyGeometry = new THREE.BoxGeometry(1, 2, 1);
            const bodyMaterial = new THREE.MeshPhongMaterial({ color: 0x118ab2 });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            body.position.y = 1;
            body.castShadow = true;
            group.add(body);
            
            // Head
            const headGeometry = new THREE.SphereGeometry(0.6, 32, 32);
            const headMaterial = new THREE.MeshPhongMaterial({ color: 0xffd1dc });
            const head = new THREE.Mesh(headGeometry, headMaterial);
            head.position.y = 2.5;
            head.castShadow = true;
            group.add(head);
            
            // Doctor coat
            const coatGeometry = new THREE.BoxGeometry(1.2, 1.5, 1.2);
            const coatMaterial = new THREE.MeshPhongMaterial({ color: 0xffffff });
            const coat = new THREE.Mesh(coatGeometry, coatMaterial);
            coat.position.y = 1.8;
            coat.castShadow = true;
            group.add(coat);
            
            // Stethoscope
            const stethGeometry = new THREE.TorusGeometry(0.3, 0.05, 8, 16);
            const stethMaterial = new THREE.MeshPhongMaterial({ color: 0x333333 });
            const steth = new THREE.Mesh(stethGeometry, stethMaterial);
            steth.position.set(0.5, 2.2, 0);
            steth.rotation.z = Math.PI / 2;
            group.add(steth);
            
            // Position the doctor
            group.position.set(8, 0, 0);
            group.scale.set(1.2, 1.2, 1.2);
            doctorModel = group;
            scene.add(doctorModel);
            
            // Animate the doctor
            animateDoctor();
        }
        
        function animateDoctor() {
            let time = 0;
            
            function animate() {
                time += 0.01;
                if (doctorModel) {
                    doctorModel.position.y = Math.sin(time + 1) * 0.2;
                }
                requestAnimationFrame(animate);
            }
            
            animate();
        }
        
        function createRoom() {
            // Floor
            const floorGeometry = new THREE.PlaneGeometry(100, 100);
            const floorMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xffcfd8,
                side: THREE.DoubleSide
            });
            const floor = new THREE.Mesh(floorGeometry, floorMaterial);
            floor.rotation.x = Math.PI / 2;
            floor.position.y = -0.5;
            floor.receiveShadow = true;
            scene.add(floor);
            
            // Decorative balloons
            const balloonGeometry = new THREE.SphereGeometry(0.5, 32, 32);
            const balloonColors = [0xff4d8d, 0x06d6a0, 0x118ab2, 0xffd166, 0x8338ec];
            
            for (let i = 0; i < 10; i++) {
                const balloonMaterial = new THREE.MeshPhongMaterial({ 
                    color: balloonColors[i % balloonColors.length],
                    shininess: 100
                });
                const balloon = new THREE.Mesh(balloonGeometry, balloonMaterial);
                balloon.position.set(
                    (Math.random() - 0.5) * 20,
                    Math.random() * 10 + 5,
                    (Math.random() - 0.5) * 20
                );
                balloon.castShadow = true;
                scene.add(balloon);
                
                // Animate balloon
                animateBalloon(balloon);
            }
            
            // Happy birthday text in 3D
            create3DText();
        }
        
        function animateBalloon(balloon) {
            let time = Math.random() * Math.PI * 2;
            
            function animate() {
                time += 0.01;
                balloon.position.y += Math.sin(time) * 0.01;
                balloon.rotation.y += 0.01;
                
                if (balloon.parent) {
                    requestAnimationFrame(animate);
                }
            }
            
            animate();
        }
        
        function create3DText() {
            // This would normally use TextGeometry, but for simplicity we'll use placeholder
            const textGeometry = new THREE.BoxGeometry(6, 1, 0.2);
            const textMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xff4d8d,
                emissive: 0xff4d8d,
                emissiveIntensity: 0.2
            });
            const text = new THREE.Mesh(textGeometry, textMaterial);
            text.position.set(0, 8, -10);
            scene.add(text);
        }
        
        function cutCake() {
            if (cakeCut) return;
            
            cakeCut = true;
            
            // Animate cake cutting
            birthdayCake.children.forEach((layer, index) => {
                setTimeout(() => {
                    layer.position.y -= 0.5;
                }, index * 200);
            });
            
            // Create celebration effect
            createCelebration();
            
            // Show message
            showCakeMessage();
        }
        
        function createCelebration() {
            const overlay = document.getElementById('celebration-overlay');
            
            // Create confetti
            for (let i = 0; i < 200; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.classList.add('confetti');
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 60%)`;
                    confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
                    confetti.style.animationDelay = Math.random() * 1 + 's';
                    overlay.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 5000);
                }, i * 10);
            }
            
            // Create hearts
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.classList.add('heart');
                    heart.innerHTML = '❤️';
                    heart.style.left = Math.random() * 100 + 'vw';
                    heart.style.animationDuration = Math.random() * 5 + 3 + 's';
                    heart.style.animationDelay = Math.random() * 1 + 's';
                    heart.style.fontSize = Math.random() * 30 + 20 + 'px';
                    overlay.appendChild(heart);
                    
                    setTimeout(() => {
                        heart.remove();
                    }, 8000);
                }, i * 100);
            }
        }
        
        function showQuote() {
            const quoteDisplay = document.getElementById('quote-display');
            const quoteText = document.getElementById('quote-text');
            const quoteAuthor = document.getElementById('quote-author');
            
            currentQuote = (currentQuote + 1) % quotes.length;
            quoteText.textContent = `"${quotes[currentQuote].text}"`;
            quoteAuthor.textContent = `- ${quotes[currentQuote].author}`;
            
            quoteDisplay.classList.add('active');
        }
        
        function showCakeMessage() {
            document.getElementById('cake-message').classList.add('active');
        }
        
        function showDoctorMessage() {
            document.getElementById('doctor-message').classList.add('active');
            
            setTimeout(() => {
                document.getElementById('doctor-message').classList.remove('active');
            }, 8000);
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            
            // Rotate cake slowly
            if (birthdayCake && !cakeCut) {
                birthdayCake.rotation.y += 0.005;
            }
            
            renderer.render(scene, camera);
        }
        
        // Event Listeners
        document.getElementById('cake-btn').addEventListener('click', () => {
            cutCake();
            document.getElementById('cake-message').classList.add('active');
        });
        
        document.getElementById('love-btn').addEventListener('click', () => {
            createCelebration();
            showQuote();
        });
        
        document.getElementById('joy-btn').addEventListener('click', () => {
            // Make girl jump
            if (birthdayGirl) {
                const originalY = birthdayGirl.position.y;
                birthdayGirl.position.y += 2;
                
                setTimeout(() => {
                    birthdayGirl.position.y = originalY;
                }, 500);
            }
            
            createCelebration();
        });
        
        document.getElementById('quote-btn').addEventListener('click', showQuote);
        
        document.getElementById('doctor-btn').addEventListener('click', showDoctorMessage);
        
        document.getElementById('close-quote').addEventListener('click', () => {
            document.getElementById('quote-display').classList.remove('active');
        });
        
        document.getElementById('close-cake-msg').addEventListener('click', () => {
            document.getElementById('cake-message').classList.remove('active');
        });
        
        // Raycasting for clicking 3D objects
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        
        function onMouseClick(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            raycaster.setFromCamera(mouse, camera);
            
            const intersects = raycaster.intersectObjects(scene.children, true);
            
            if (intersects.length > 0) {
                const object = intersects[0].object;
                
                // Check if cake was clicked
                let parent = object;
                while (parent) {
                    if (parent.userData && parent.userData.isCake) {
                        cutCake();
                        break;
                    }
                    parent = parent.parent;
                }
            }
        }
        
        window.addEventListener('click', onMouseClick);
        
        // Initialize and start
        animate();
        
        // Console birthday message
        console.log("%c🎂🎉🎁 3D BIRTHDAY EXPERIENCE FOR UPASNA! 🎁🎉🎂", "color: #ff4d8d; font-size: 24px; font-weight: bold;");
        console.log("%cNavigate the 3D world with your mouse! Click on objects to interact!", "color: #06d6a0; font-size: 16px;");
    </script>
</body>
</html>
